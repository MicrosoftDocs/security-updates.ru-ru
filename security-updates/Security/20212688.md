---
TOCTitle: 'Набор средств шифрования данных для мобильных ПК. Глава 1. Сведения о рисках'
Title: 'Набор средств шифрования данных для мобильных ПК. Глава 1. Сведения о рисках'
ms:assetid: 'df2c6d71-98f7-4212-b3b7-b9eb2f501348'
ms:contentKeyID: 20212688
ms:mtpsurl: 'https://technet.microsoft.com/ru-ru/library/Cc162822(v=TechNet.10)'
---

Набор средств шифрования данных для мобильных ПК — анализ безопасности
======================================================================

### Глава 1. Сведения о рисках

Опубликовано 4 апреля 2007

Конфиденциальные данные, как и любые другие, имеют сложный жизненный цикл и, как правило, перемещаются из одного места в другое в процессе выполнения своих бизнес-функций. Обеспечение безопасности данных необходимо на протяжении всего цикла их использования, но многие технологии и процессы применяются только на отдельных этапах жизненного цикла данных.

![](/security-updates/images/Cc162822.4e80aa2b-2eba-421f-aeb8-d6021778e75d(ru-ru,TechNet.10).gif)

**Рис. 1.1. Пример жизненного цикла данных**

В данном руководстве рассмотрен уровень безопасности, который можно достичь при использовании технологий корпорации Майкрософт для защиты данных при их копировании или создании на мобильных ПК, например на переносных компьютерах.

Анализ защиты данных в перечисленных ниже ситуациях выходит за рамки данного руководства (за исключением локального кэширования данных):

-   перемещение данных по внутренним или внешним сетям;

-   представление данных в веб-приложениях ("тонких" клиентах);

-   использование данные в приложениях после расшифровки.

##### На этой странице

[](#efaa)[Риски для данных](#efaa)
[](#eeaa)[Понятия криптографии, применимые к защите данных](#eeaa)
[](#edaa)[Общие сведения о рисках для данных](#edaa)
[](#ecaa)[Подходы к защите данных](#ecaa)
[](#ebaa)[Дополнительные сведения](#ebaa)

### Риски для данных

Две технологии, описанные в данном руководстве — шифрованная файловая система (EFS) и шифрование диска Microsoft® BitLocker™ (BitLocker), — являются примерами двух различных, но взаимодополняющих подходов к шифрованию данных. Файловая система EFS — это механизм шифрования, защищающий данные в файлах и папках каждого пользователя. BitLocker — это механизм шифрования всего тома, шифрующий все секторы на системном томе компьютера, в том числе операционную систему, приложения и файлы данных. Технология BitLocker обеспечивает проверку целостности и шифрование до загрузки операционной системы, но не позволяет выполнять проверку подлинности пользователя. Файловая система EFS дополняет возможности технологии BitLocker, предоставляя доступ к зашифрованным файлам только пользователям, прошедшим надлежащим образом проверку на работающем компьютере.

Вследствие фундаментально различных подходов и методов реализации технологии EFS и BitLocker обладают собственными достоинствами и недостатками и обеспечивают разные уровни безопасности в случае распространенных атак злоумышленников. В руководстве подробно описываются подобные случаи и способы применения данных технологий шифрования в каждом из них.

#### Общие сведения о типах данных

Существуют различные типы конфиденциальных данных и множество разных ситуаций, в которых эти данные могут быть раскрыты. В данном руководстве описываются различные технологии шифрования перечисленных ниже типов данных.

-   **Информация личного порядка (личные данные)**. Личные данные о клиентах или сотрудниках организации, в том числе страховые номера (SSN), номера кредитных карт, сведения о здоровье и т. д. Такие данные защищены постановлениями правительства или промышленными стандартами, такими как Акт о передаче и защите данных учреждений здравоохранения HIPAA (в США), Директива ЕС о защите данных и Калифорнийский билль SB1386. Утрата данных этого типа приводит, как правило, к немедленным и долгосрочным финансовым потерям организации, даже если не удастся доказать, что эти данные были получены с компьютера.

-   **Интеллектуальная собственность**. К этому типу относятся данные, которые организация считает важными или конфиденциальными, например планы маркетинговых кампаний, исследования новых продуктов перед их патентованием, программные алгоритмы, списки потенциальных клиентов и т. д. Если такие данные будут потеряны или обнаружены неуполномоченными лицами (а также если они находятся на преднамеренно украденном устройстве), это может привести к потере конкурентного преимущества и к иным негативным последствиям. Прежде всего следует помнить о финансовых последствиях использования данных, являющихся интеллектуальной собственностью, поэтому затраты на защиту данных должны соответствовать финансовым потерям в случае их разглашения. Однако подобные расчеты не всегда полезны. Возможность публичного скандала также может являться стимулирующим фактором, поэтому рекомендуется шифровать данные на компьютере генерального директора, чтобы избежать нежелательной огласки.

#### Сценарии атак: злоумышленники внутри организации и вне нее

При обсуждении атак и технологий защиты от них часто проводят различие между угрозами, исходящими от сотрудников организации и внешних злоумышленников. Сотрудники организации, как правило, обладают возможностями, недоступными внешним злоумышленникам. Неполный список различий приведен ниже.

-   Сотрудник организации может на законных основаниях войти в систему с собственной учетной записью.

-   Сотрудник организации может получать доступ к компьютеру по сети в течение продолжительного периода времени, пока компьютер используется законными пользователями. Подобная возможность увеличивает вероятность нахождения уязвимости, которой можно воспользоваться.

-   Сотрудник организации имеет больше возможностей для выполнения многоэтапных атак.

-   Сотруднику организации проще получить пароль пользователя (или его часть) методами социотехники.

Для сравнения сильных и слабых сторон различных подходов к шифрованию данных необходимо обсудить некоторые понятия криптографии, которые относятся к шифрованию вообще и к технологиям EFS и BitLocker в частности.

[](#mainsection)[К началу страницы](#mainsection)

### Понятия криптографии, применимые к защите данных

Шифрование можно осуществить множеством способов. Например, шифрование можно выполнять на различных уровнях или с помощью сложных шаблонов, содержащихся в уникальных алгоритмах. При рассмотрении ключей шифрования часто анализируется длина ключа, но вопросы получения, хранения и использования ключей зачастую являются гораздо более важными. Вопросы хранения и защиты ключей шифрования редко подробно обсуждаются в технической документации, но эти вопросы крайне важны для понимания того, что обычно является самым слабым местом технологии шифрования.

![](/security-updates/images/Cc162822.note(ru-ru,TechNet.10).gif)**Примечание.**

Данный раздел руководства не является учебником по технологиям шифрования. Если вы не знаете основ таких фундаментальных понятий шифрования, как симметричное и асимметричное шифрование, изучите статью [Применение криптографии для обеспечения безопасности сети и данных](http://www.microsoft.com/technet/prodtechnol/windows2000serv/reskit/distrib/dsch_key_rveg.mspx).

Оптимальный алгоритм шифрования разработан и реализован таким образом, чтобы единственный способ взлома шифра заключался в подборе единственного правильного ключа из огромного *пространства ключей*, которое представляет собой диапазон значений, которые может принимать ключ. Этот тип атаки называется методом *перебора*.

Алгоритмы с использованием симметричных ключей используют, как правило, пространство ключей от 40 до 512 бит. Количество возможных значений ключа равно максимальному численному значению, которое можно выразить с помощью данного количества бит. 40 бит дают максимальное численное значение, равное 1 099 511 627 775 (240 -1), довольно большое число, хотя современные компьютеры могут с легкостью перебрать все возможные значения 40-разрядного пространства ключей для расшифровки данных. Однако каждый бит, добавляемый к пространству ключей, удваивает количество возможных ключей, поэтому 41-разрядное пространство ключей содержит 2 199 023 255 552 возможных ключей. Увеличение пространства ключей быстро увеличивает количество возможных ключей до такого значения, при котором атаки методом перебора становятся неэффективными при использовании современного оборудования и известных методов.

Однако технологии шифрования редко обеспечивают настолько надежную защиту. Многие реализации технологий шифрования обладают одной или несколькими из указанных ниже уязвимостей.

-   **Изъян в алгоритме шифрования**. В алгоритмах шифрования иногда обнаруживаются фундаментальные изъяны — после экспертной оценки или успешной атаки. В некоторых случаях подобные изъяны обнаруживаются спустя несколько лет после публикации алгоритма и его широкого распространения.

-   **Неправильная реализация**. Алгоритмы реализуются конкретными разработчиками и иногда содержат ошибки, снижающие эффективность алгоритма.

-   **Ключи имеют низкий уровень энтропии**. Если пространство ключей имеет размер, например, 128 бит, это еще не означает, что при создании 128-разрядного ключа используются подлинно случайные числа или все пространство ключей.

-   **Ключи легко вскрываются**. Ключи необходимо где-то хранить. Если это местоположение можно обнаружить и получить ключ, можно вскрыть зашифрованные данные.

Если технологии шифрования подвержены подобным уязвимостям, может показаться странным, почему кто-то вообще заботится о шифровании. На практике существует два фактора, позволяющие снизить вероятность возникновения подобных уязвимостей. Одним из факторов является то, что корпорация Майкрософт инвестирует значительные средства в проверку и тестирование стойкости своей реализации алгоритмов шифрования. Этот процесс начинается с выбора проверенных и признанных алгоритмов, имеющих встроенную устойчивость к некоторым типам атак. Кроме того, корпорация Майкрософт сертифицирует свои реализации алгоритмов шифрования в соответствии с [федеральными стандартами обработки информации (FIPS) 140](http://www.microsoft.com/technet/archive/security/topics/issues/fipseval.mspx), а свои операционные системы — в соответствии со стандартом Common Criteria. Дополнительные сведения о сертификации Common Criteria см. на странице [Сертификация платформы Windows в соответствии со стандартом Common Criteria](http://www.microsoft.com/technet/security/prodtech/windowsxp/ccc/default.mspx)веб-узла Microsoft TechNet. Кроме того, в процессы разработки корпорации Майкрософт был интегрирован процесс [жизненного цикла разработки защищенных информационных систем](http://msdn2.microsoft.com/en-us/library/ms995349.aspx), благодаря которому обеспечение безопасности становится ключевым аспектом разработки продукта.

Второй фактор заключается в том, что шифрование можно сделать значительно более устойчивым к атакам, чтобы обеспечить адекватную степень безопасности защищаемых данных. Другими словами, не всегда нужно учитывать ситуацию, при которой правительство направит все свои ресурсы на взлом технологии шифрования, защищающей базу данных клиентов. Может быть необходимо только решение, которое не позволит злоумышленникам, обладающим крайне ограниченными ресурсами или знаниями, без усилий вскрыть данные. Другой способ оценки потребности в шифровании заключается в оценке ценности данных, которые требуется зашифровать, и последующем сравнении с затратами на взлом шифрования. Например, если база данных клиентов стоит для конкурента 100 000 $, а оценочная стоимость взлома шифрования составляет 1 000 000 $, уровень безопасности зашифрованных данных можно считать достаточным.

![](/security-updates/images/Cc162822.note(ru-ru,TechNet.10).gif)**Примечание.**

Дополнительные сведения о способах оценки безопасности криптографической реализации см. в главе 19 справочника [Специальная публикация 800-12. Введение в компьютерную безопасность: справочник Национального института стандартов и технологий США](http://csrc.nist.gov/publications/nistpubs/800-12/), опубликованного Национальным институтом стандартов и технологий США (NIST).

Для оценки относительных достоинств подходов к шифрованию необходимо тщательно изучить детали реализации алгоритма шифрования. На приведенном ниже рисунке показана типичная цепочка событий, происходящих при шифровании и расшифровке данных.

![](/security-updates/images/Cc162822.a42ab380-80b9-41a7-8f54-50ad34a59ee1(ru-ru,TechNet.10).gif)

**Рис. 1.2. Шифрование и расшифровка данных**

При оценке технологии шифрования важно учитывать приведенные ниже факторы.

-   **Выбор алгоритма**. Безопасность реализации алгоритма шифрования зависит как от качества реализации, так и от реализуемого алгоритма. По этой причине в большинстве коммерческих технологий реализовано относительно небольшое число проверенных и хорошо протестированных алгоритмов, которые считаются безопасными при различных типах атак. Примерами таких алгоритмов являются 3DES (Triple DES), AES и Blowfish, которые являются алгоритмами симметричного шифрования, RSA и ECC, которые являются алгоритмами на основе открытых ключей.

-   **Создание ключей**. Технологии шифрования зачастую используют несколько ключей. Некоторые из этих ключей создаются оборудованием или программным обеспечением, некоторые предоставляются людьми, а некоторые создаются на основе ранее созданных ключей, ключей, предоставленных людьми, или их сочетания. Стойкость созданных ключей зависит от возможности предсказать значение ключа при знании внешних факторов. Другими словами, эффективный ключ должен быть в достаточной степени случайным и иметь достаточную длину.

-   **Производные ключи**. Во многих реализациях ключи создаются на основе других ключей, например на основе пароля пользователя. Процесс создания каждого из ключей критически важен для общего уровня безопасности реализации. Важно иметь в виду, что созданные ключи не могут быть более стойкими, чем исходные. Можно создать 256-разрядный ключ AES на основе 56-разрядного ключа DES, но созданный ключа не будет более стойким, чем 56-разрядный ключ DES, который, в свою очередь, может быть получен на основе еще менее стойкого ключа.

-   **Хранилище ключей**. Каждая технология шифрования должна хранить и использовать данные ключа. Способ хранения данных ключа критически важен для общего уровня безопасности реализации. Ценные данные, такие как ключи подписи корневого центра сертификации, зачастую защищены устойчивыми к взлому аппаратными модулями, обеспечивающими надежную защиту от атаки. Многие организации используют смарт-карты, поскольку они обеспечивают более высокий уровень безопасности хранилища ключей, чем программные решения. Дополнительным преимуществом смарт-карт является то, что пользователь не может (в том числе непреднамеренно) восстановить и раскрыть данные ключа смарт-карты. Также необходимо обеспечить правильное поведение пользователя, в том числе надлежащую защиту данных ключа и паролей. Технологии шифрования, требования которых пользователю проще соблюдать, значительно более безопасны и эффективны.

-   **Кэширование ключей**. Криптографические операции зачастую имеют высокую вычислительную сложность. Для повышения производительности технологии шифрования зачастую используют способы оптимизации, включающие кэширование ключей или промежуточные результаты криптографических операций. Подобные данные являются крайне конфиденциальными, и если технология не обеспечивает их надлежащую защиту, они могут стать доступны злоумышленнику. Например, технология, кэширующая ключ шифрования в памяти, может позволить злоумышленнику восстановить его из системной памяти или файла подкачки, если кэш неправильно реализован и не защищен.

-   **Самое слабое звено**. Общий уровень безопасности реализации алгоритма шифрования зависит от безопасности самого слабого звена. В силу этого выявление самого слабого звена в любой технологии шифрования является наиболее важным аспектом при оценке реализации алгоритма шифрования. Во многих средах самым слабым звеном являются пользователи, поэтому критически важно принять технические меры защиты данных на мобильных ПК, а также провести соответствующее обучение пользователей.

-   **Баланс удобства использования и безопасности**. Фактически ни одно решение для шифрования не является идеальным. Все решения подвержены атакам методом перебора — проблема заключается только в том, сколько времени займет подобная атака. Эффективные реализации более или менее эквивалентны по стойкости лежащей в их основе технологии шифрования. Однако криптографическая стойкость зачастую не является самым важным фактором. Также очень важны другие факторы, например взаимодействие с пользователями. Меры безопасности почти всегда можно повышать до тех пор, пока доступ к данным для пользователей не станет слишком сложным, но степень сложности необходимо тщательно проанализировать, чтобы определить ее приемлемость для организации. Не следует внедрять решение, которое настолько сложно в использовании, что пользователи предпочтут ему бумагу и карандаш.

#### Сложность атаки

Не все атаки, направленные на взлом решения для шифрования, одинаковы. Как было показано ранее, умный злоумышленник всегда атакует самое слабое звено. Чтобы оценить уровень безопасности решения для шифрования, можно перечислить все возможные атаки на используемые в решении технологии шифрования и упорядочить их по сложности.

Атака с низкой сложностью — это атака, не требующая ресурсов для чтения интересующих злоумышленника данных. Другими словами, этот тип атаки соответствует ситуации, при которой злоумышленнику для получения доступа к данным требуется всего лишь поднять крышку переносного компьютера. Сложность атаки зачастую зависит от контекста и иных факторов конкретного решения.

[](#mainsection)[К началу страницы](#mainsection)

### Общие сведения о рисках для данных

Цель решения для шифрования заключается в шифровании всех важных данных таким образом, чтобы злоумышленник — новичок или эксперт — не смог случайно или намеренно получить доступ к незашифрованным данным. Однако защита, обеспечиваемая решениями для шифрования, может быть уничтожена при использовании мощных ресурсов, нахождении неизвестного изъяна в конкретной технологии шифрования или вследствие ошибки пользователя. Риск, связанный с технологиями для шифрования, основан на решениях, принятых при их разработке и реализации, а также на способе их использования. Некоторые потенциальные риски перечислены в следующих подразделах, на них также имеются ссылки в описаниях ситуаций в данном руководстве. Имейте в виду, что не все из перечисленных рисков применимы ко всем организациям. После определения рисков, применимых к организации, и выбора из них наиболее существенных следует принять меры по их снижению.

#### Компьютер оставлен в режиме гибернации

Большинство переносных компьютеров могут переходить в режим гибернации, позволяющий пользователям отключать компьютеры, чтобы они не потребляли электроэнергию, а затем восстанавливать их в точно такое же состояние, в котором они находились до входа в режим гибернации. Однако если компьютер оставлен в незащищенном режиме гибернации, злоумышленник может получить неограниченный доступ ко всем данным на компьютере. Как и для спящего режима, компьютеры можно настроить на запрос учетных данных пользователя при выходе из режима гибернации. Дополнительные сведения о включении данного параметра см. в разделе [Защита компьютера паролем в режиме ожидания или гибернации](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/pwrmn_passwordprotect_standby.mspx?mfr=true) электронной документации для Windows XP Professional.

![](/security-updates/images/Cc162822.important(ru-ru,TechNet.10).gif)**Важно!**

Корпорация Майкрософт настоятельно рекомендует требовать использовать учетные данные для вывода заблокированного компьютера из режима гибернации.

#### Компьютер оставлен в спящем (ждущем) режиме

Переносной компьютер можно настроить таким образом, чтобы он не предлагал пользователю вводить пароль или вставлять смарт-карту при выходе компьютера из спящего режима, что означает, что компьютер будет фактически включен и доступен любому. Пользователи, настраивающие компьютер на использование спящего режима, подвергаются большому риску, если компьютер не требует входа в систему при выходе из спящего режима. Дополнительные сведения о включении данного параметра см. в разделе [Защита компьютера паролем в режиме ожидания или гибернации](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/pwrmn_passwordprotect_standby.mspx?mfr=true) электронной документации для Windows XP Professional.

![](/security-updates/images/Cc162822.important(ru-ru,TechNet.10).gif)**Важно!**

Корпорация Майкрософт настоятельно рекомендует требовать использовать учетные данные для вывода заблокированного компьютера из спящего режима.

#### Пользователь не вышел из системы, компьютер разблокирован

Очень немногие технологии шифрования могут помочь в случае, если компьютер оставлен в общественном месте, а полномочный пользователь не вышел из системы. Некоторые атаки могут быть успешно осуществлены даже против компьютера с заблокированным рабочим столом. Злоумышленник может просто взять компьютер, отнести его в безопасное место и начать считывать или копировать данные. Некоторые технологии шифрования требуют при каждом доступе к файлу использовать внешний ключ, но это настолько неудобно, что лишь немногие организации выбирают подобное решение. Более распространенным способом решения проблемы является использование внешнего ключа или устройства (например смарт-карты) с кэшированием, позволяющим компьютеру хранить зашифрованную копию ключа для повышения удобства.

#### Обнаружение локального пароля или пароля домена

Злоумышленник, получивший учетные данные пользователя, сможет получить доступ к зашифрованным данным одним из двух способов (в зависимости от реализации алгоритма шифрования): учетные данные можно использовать для расшифровки данных ключа напрямую либо для получения доступа к данным ключа путем атаки на учетные данные, кэшированные или хранимые операционной системой.

В любой системе безопасности самым слабым звеном в технологии шифрования является, как правило, пароль пользователя, поскольку выбираемые пользователями пароли, как правило, намного слабее самых слабых ключей, используемых распространенными алгоритмами шифрования. Автор статьи [Как избежать фиктивных продуктов шифрования: вопросы и ответы по средству от всех болезней](http://www.faqs.org/faqs/cryptography-faq/snake-oil/) утверждает, что даже английская фраза из 20 букв соответствует случайному ключу длиной всего 40 бит, а не 20 x 8=160 бит, как можно ожидать. По мнению этого автора, пароль из 8 знаков обладает намного меньшей случайностью, чем ключ длиной 40 бит. Однако даже эта ситуация не так серьезна по сравнению с той, когда пользователь записывает свой пароль на листке бумаги и прикрепляет его к переносному компьютеру, что обесценивает любое решение для шифрования, основанное на пароле пользователя.

![](/security-updates/images/Cc162822.note(ru-ru,TechNet.10).gif)**Примечание.**

Описание атак, направленных на получение пароля пользователя методами социотехники или иными нетехническими способами, выходят за рамки данного руководства. Атаки для получения пароля в основном включают криптографические атаки методом перебора и иные технические атаки, направленные на хранилища учетных данных.

#### Сотрудник организации может прочитать зашифрованные данные

Этот риск отличается от ранее описанных, поскольку предполагается, что злоумышленник находится внутри организации, а не вне нее. Необходимо учитывать тот факт, что некоторые технологии шифрования, особенно технологии шифрования всего жесткого диска компьютера, описанные в следующем разделе, позволяют получить доступ к данным любому пользователю, вошедшему в систему. Учетная запись пользователя может быть как локальной, так и сетевой (например учетной записью в службе каталогов Active Directory®), а вход в систему может выполняться локально или по сети.

#### Обнаружение ключей с помощью автономной атаки

При этом типе атаки злоумышленник подключает диск с зашифрованными данными к другой или измененной операционной системе. Если злоумышленник хорошо знает реализацию решения для шифрования, он может попытаться изолировать ключи, используемые для шифрования данных, и провести атаку на механизм хранения ключей методом перебора. Правило наименьшего сопротивления применимо и для данного типа атаки, поэтому злоумышленник попытается изолировать и атаковать самое слабое звено в механизме хранения. Атаки методом перебора на ключи даже средней степени стойкости крайне сложны и требуют огромных вычислительных ресурсов. Если решение для шифрования реализовано настолько хорошо, что единственным вариантом для злоумышленника является метод перебора, скорее всего, цель обеспечения безопасности данных в организации достигнута.

#### Автономные атаки на операционную систему

При атаках этого типа злоумышленники пытаются изменить системные файлы или параметры, когда операционная система не запущена, чтобы облегчить доступ к зашифрованным данным. Подобные атаки технически сложны и требуют глубоких знаний операционной системы. В контексте технологии шифрования всего тома одна из возможных атак заключается в том, что злоумышленник изменяет некоторые зашифрованные данные на диске в надежде на то, что это приведет к изменению отдельного значения реестра или жестко заданного значения в исполняемом файле операционной системы, которое сделает компьютер менее защищенным.

#### Сетевые атаки на операционную систему

Атаки этого типа пытаются преодолеть средства защиты работающей операционной системы. Примерами таких атак являются атаки для несанкционированного получения прав и атаки для удаленного выполнения кода. Если злоумышленнику удастся провести такую атаку, он сможет восстановить зашифрованные данные, выполнив на компьютере необходимый для этого код.

#### На компьютере находятся незашифрованные данные

Наличие на компьютере незашифрованных конфиденциальных данных является основной угрозой, которую должно устранить любое решение для шифрования данных. Практически все решения для шифрования данных снижают эту угрозу, если только используемый алгоритм шифрования не настолько слаб, что его можно взломать практически без усилий. Обе технологии корпорации Майкрософт, описанные в данном руководстве, используют стандартные алгоритмы шифрования, поэтому предполагается, что они снижают этот риск. Однако в некоторых ситуациях технология шифрования может не применяться к определенному файлу, который содержит конфиденциальные данные. Подобные ситуации обсуждаются в последующих частях руководства.

#### Утечка незашифрованных данных через файл гибернации

*Файл гибернации* аналогичен системному файлу подкачки, за исключением того, что в него записывается моментальный снимок всей физической памяти. Если во время выполнения моментального снимка в физической памяти хранились какие-либо конфиденциальные данные, они будут записаны на диск в файле режима гибернации. Как и атаки на файл подкачки, атаки на файл гибернации обычно выполняются автономно.

#### Утечка незашифрованных данных через системный файл подкачки

Современные операционные системы предоставляют приложениям большой объем виртуальной памяти путем записи неиспользуемых данных из памяти в файл подкачки, хранящийся на жестком диске. Эта функция представляет определенный риск, поскольку запущенное на компьютере приложение может загружать с диска зашифрованные данные, расшифровывать их в памяти для использования, а затем записывать их в незашифрованном виде на жесткий диск в файл подкачки. Некоторые операционные системы удаляют файл подкачки во время завершения работы, но существует ряд известных способов предотвратить удаление файла подкачки (в том числе преднамеренный сбой работы операционной системы). Кроме того, может быть просто восстановить файл подкачки и изучить его содержимое. Атаки на файл подкачки почти всегда предполагают извлечение жесткого диска из компьютера и подключение его к другому компьютеру либо загрузку на целевом компьютере другой операционной системы. Подобные атаки называются *автономными атаками*.

![](/security-updates/images/Cc162822.note(ru-ru,TechNet.10).gif)**Примечание.**

Утечка конфиденциальных данных, например ключей шифрования, может происходить через другие средства кэширования операционной системы или приложений, в том числе через временные файлы, записываемые на диск. Меры, описанные в руководстве "Набор средств шифрования данных для мобильных ПК", позволяют не только снизить риск утечки данных через системный файл подкачки, но и предотвратить их утечку через другие средства кэширования приложений.

#### Атаки на платформу

Целью некоторых атак являются аппаратные или программные возможности конкретной платформы. Например, в некоторых атаках используется функция прямого доступа к памяти (DMA) интерфейса IEEE 1394 (FireWire) для чтения и записи данных в системной памяти без ведома операционной системы. Другие атаки включают возможность прямого доступа к памяти с помощью активного PCI-устройства и использование уязвимостей микросхем моста PCI и ОЗУ. Затраты на осуществление подобных атак изначально были весьма существенны, но они снижаются по мере распространения необходимых методов и оборудования.

#### Необходимое средство проверки подлинности оставлено на компьютере или рядом с ним.

Этот риск относится к технологиям шифрования, которые могут использовать для хранения ключей шифрования внешнее устройство, например смарт-карту или USB-устройство. Пользователи, не имеющие представления об этом риске, могут пренебречь мерами предосторожности и не отключить устройство от компьютера или поместить его в ту же сумку. Поскольку такая ситуация весьма распространена, большинство организаций не используют в своем решении для шифрования только физический фактор проверки подлинности. (Этот риск также относится к тем пользователям, которые записывают ПИН или парольные фразы на бумаге, но с подобным поведением следует бороться в основном с помощью обучения пользователей; этот вопрос в данном руководстве не рассматривается.)

#### Ошибка пользователя

Пользователи не всегда понимают все аспекты используемой технологии или уделяют столько внимания политикам безопасности, как хотелось бы администраторам. Этот риск относится к пользователям, которые не делают то, что следует делать, поскольку не знают, как включить шифрование, забывают зашифровать конкретный файл или не уделяют достаточно внимания политикам безопасности данных.

[](#mainsection)[К началу страницы](#mainsection)

### Подходы к защите данных

При разработке и реализации технологии защиты данных необходимо учитывать вопросы безопасности, удобства использования технологии и управления ей после развертывания. Хотя приведенный ниже список технологий не является исчерпывающим, он может помочь лучше понять материал, представленный в данном руководстве. К технологиям шифрования относятся:

-   программное шифрование;

-   аппаратное шифрование;

-   шифрование до загрузки операционной системы;

-   шифрование после загрузки операционной системы;

-   шифрование на уровне приложений;

-   шифрование на уровне файлов и папок;

-   шифрование всего тома;

-   шифрование для каждого пользователя;

-   шифрование компьютера.

#### Программное шифрование

Программное шифрование является стандартным для большинства технологий и продуктов защиты данных. Альтернативой программному шифрованию является аппаратное шифрование, которое требует специального криптографического оборудования, которое ранее в большинстве случаев не было доступно для персональных компьютеров. При программном шифровании криптографические операции выполняются ЦП компьютера. Когда компьютер выключен либо находится в спящем режиме или режиме гибернации, ключи шифрования обычно хранятся в зашифрованном виде на диске. Обычно исходный ключ хранится отдельно от компьютера, например на USB-устройстве, которое используется для расшифровки данных ключа. Когда компьютер включен, ключи шифрования обычно хранятся в оперативной памяти.

Ниже перечислены преимущества программного шифрования.

-   **Возможность обновления и изменения реализации**. Технологии программного шифрования можно в любое время обновить для исправления изъянов реализации, добавления новых возможностей или использования преимуществ новых алгоритмов.

-   **Отсутствие необходимости использовать специальное оборудование**. Поскольку технологии программного шифрования не требуют специального оборудования, их можно использовать на всех компьютерах в организации.

Недостатки программного шифрования описаны ниже.

-   **Уязвимости программного обеспечения**. Решения, использующие только программное обеспечение, подвержены атакам, целью которых является попытка обойти безопасный режим работы. Типичная атака заключается в изменении двоичных файлов операционной системы таким образом, чтобы предотвратить шифрование, изменить ключи или существенном ослабить шифрование.

-   **Обнаружение ключей**. Если ключ шифрования хранится на компьютере, атака может привести к раскрытию его значения. Важно понимать, каким образом защищен ключ. Если ключ расшифровывается только с помощью данных другого ключа, хранящихся на том же компьютере, следует ожидать, что опытному и терпеливому злоумышленнику удастся вскрыть ключ.

#### Аппаратное шифрование

Некоторые механизмы шифрования используют специальное криптографическое оборудование для изолирования криптографических операций от ЦП и обеспечения повышенного уровня безопасности хранилища ключей. Подобное оборудование обычно предоставляет средства безопасного хранения одного или нескольких ключей шифрования, а также функции для выполнения криптографических операций на аппаратном уровне, поэтому ключ никогда бывает доступен другим программным или аппаратным компонентам.

Ниже перечислены преимущества аппаратного шифрования.

-   **Ключи шифрования защищены от уязвимостей программного обеспечения и операционной системы**. Аппаратное шифрование, как правило, гарантирует, что закрытые составляющие пар ключей изолированы от памяти, контролируемой операционной системой.

-   **Криптографические операции защищены от уязвимостей программного обеспечения и операционной системы.** Аппаратное шифрование не зависит от используемой операционной системы и не подвержено уязвимостям внешнего программного обеспечения.

Недостатки аппаратного шифрования описаны ниже.

-   **Ограниченная доступность**. Оборудование для шифрования не всегда доступно. Например, доверенный платформенный модуль, используемый технологией BitLocker, невозможно установить на старые компьютеры. Кроме того, этот модуль не всегда доступен для новых компьютеров.

-   **Сложность обновления**. При обнаружении изъяна в оборудовании, как правило, требуется заменить его. Замена оборудования также требуется в случае, если его изготовитель добавляет новые возможности или поддержку новых алгоритмов.

#### Шифрование до загрузки операционной системы

Можно установить микропрограмму, работающую на уровне BIOS, которая обеспечивает шифрование всех данных, записываемых на том жесткого диска, и расшифровку всех данных, считываемых с него. Данные операции можно сделать прозрачными для операционной системы и, таким образом, применять их к файлам операционной системы.

При наличии криптографического оборудования, например доверенного платформенного модуля, его можно использовать для обеспечения более высокого уровня безопасности шифрования и расшифровки до загрузки операционной системы. Компьютеры, оснащенные доверенным платформенным модулем, также могут создавать зашифрованный ключ, привязанный к определенным параметрам платформы, таким как код основной загрузочной записи (MBR), загрузочный сектор NTFS, блок загрузки NTFS и диспетчер загрузки NTFS. Ключи такого типа можно расшифровать только при совпадении параметров платформы со значениями, при которых был создан ключ. Этот процесс называется *запечатыванием* ключа в доверенном платформенном модуле, а процесс его расшифровки называется *распечатыванием*.

Доверенный платформенный модуль также может запечатывать и распечатывать данные, созданные за его пределами. Практические преимущества данной функции заключаются в том, что возможность распаковки ключа может зависеть от изменения определенных характеристик платформы, предположительно вследствие действий злоумышленника, направленных на преодоление таких мер безопасности, как шифрование.

Поскольку шифрование применяется к файлам операционной системы, ключ для расшифровки этих файлах необходимо предоставить до загрузки операционной системы. Этот ключ может быть различным для разных решений и может создаваться на основе персонального идентификационного номера (ПИН) или ключа, хранящегося на устройстве, например на USB-носителе или смарт-карте.

Ниже перечислены преимущества шифрования до загрузки операционной системы.

-   **Файлы операционной системы защищены от автономной атаки**. Все системные файлы и файлы конфигурации защищены решением для шифрования всего тома. Даже если злоумышленнику удастся подключить защищенный том к другой операционной системе — провести *автономную атаку* — он не сможет сделать ничего, кроме вывода операционной системы из строя.

-   **Повышенный уровень защиты файлов операционной системы**. Криптографическое оборудование, например доверенный платформенный модуль 1.2 с совместимыми обновлениями BIOS, предоставляет возможность проверки целостности критически важных компонентов первоначальной загрузки.

Недостатки шифрования до загрузки операционной системы описаны ниже.

-   **Обязательное использование стратегии восстановления данных**. Любой сбой BIOS, доверенного платформенного модуля или механизма хранения ключей приведет к невозможности чтения всех данных на компьютере. Сбои оборудования зачастую сложнее диагностировать, классифицировать и устранять, чем сбои программного обеспечения. Ремонт может занять больше времени, если оборудование необходимо вернуть изготовителю или отремонтировать за пределами организации. По этой причине необходимо разработать и часто тестировать эффективную и надежную стратегию резервного копирования и восстановления ключей.

-   **Усложнение процесса обновления программного обеспечения**. Поскольку файлы операционной системы и другие файлы зашифрованы и проверяются по электронной подписи, для обновления этих файлов может требоваться специальный процесс. Это может привести к необходимости выполнения дополнительных операций на компьютерах, использующих технологию шифрования до загрузки операционной системы.

#### Шифрование после загрузки операционной системы

Шифрование после загрузки операционной системы может выполняться операционной системой или любым запущенным на компьютере приложением. Примером технологии шифрования после загрузки операционной системы является файловая система EFS. Эта технология встроена в операционную систему Windows, поэтому ее нельзя использовать для шифрования самой операционной системы. Однако эта технология является эффективным средством защиты данных пользователя и приложений.

Ниже перечислены преимущества шифрования после загрузки операционной системы.

-   **Сбои шифрования не приводят к тому, что компьютер становится непригодным к использованию**. Даже в случае сбоя технологии шифрования компьютер остается работоспособным. Таким образом, зашифрованные данные можно восстановить без применения другого компьютера.

Недостатки шифрования после загрузки операционной системы приведены ниже.

-   **Отсутствие защиты файлов операционной системы и файлов конфигурации**. Если жесткий диск с конфиденциальными данными подключить к другому компьютеру или загрузить на мобильном компьютере другую операционную систему, можно изменить исходную операционную систему таким образом, чтобы обойти технологию шифрования.

-   **Обязательное использование стратегии восстановления данных**. Любой сбой операционной системы или приложения может привести к невозможности чтения защищенных данных. По этой причине необходимо разработать и часто тестировать эффективную и надежную стратегию резервного копирования и восстановления ключей.

#### Шифрование на уровне приложений

Шифрование также можно реализовать не на уровне BIOS или операционной системы, а на уровне приложений. Многие современные приложения, в том числе WinZip, Microsoft Office и Intuit Quicken, позволяют шифровать данные.

Ниже перечислены преимущества шифрования на уровне приложений.

-   **Независимость от платформы**. Если приложение поддерживает несколько операционных систем, данные, зашифрованные на уровне приложения, обычно можно перенести с одной платформы на другую и расшифровать при наличии правильного ключа.

-   **Возможность переноса зашифрованных данных**. Когда данные зашифрованы на уровне операционной системы, они обычно расшифровываются при выполнении операций с файлами, например при копировании и перемещении. Если целевая папка или система настроена на шифрование, данные могут быть зашифрованы с использованием совершенно другого набора ключей. Шифрование на уровне приложений обычно позволяет переносить данные в исходном зашифрованном виде в другое местоположение.

Недостатки шифрования на уровне приложений описаны ниже.

-   **Зависимость от приложения**. При преобразовании данных из одного формата в другой или их перемещении из одного контейнера в другой шифрование, как правило, не сохраняется. Например, пользователь может извлечь файл из зашифрованного архива WinZip, и извлеченный файл будет расшифрован. Если пользователь не удалит файл по окончании работы с ним, данные могут быть раскрыты.

#### Шифрование на уровне файлов и папок

Шифрование на уровне файлов и папок позволяет защитить определенные файлы и папки, а также содержащиеся в них данных. Это решение защищает только файлы, настроенные для шифрования. Все остальные данные на компьютере шифроваться не будут. Типичным подходом к шифрованию на уровне файлов и папок является создание уникального ключа шифрования для каждого файла или папки. Этот подход имеет дополнительное преимущество, которое заключается в возможности реализации шифрования данных каждого пользователя, как описано далее в данной главе.

Ниже перечислены преимущества хорошей реализации шифрования на уровне файлов и папок.

-   **Более высокая производительность, чем при шифровании всего тома**. Производительность компьютера изменяется незначительно. Тем не менее производительность системы в любом случае снизится. Шифрование на уровне файлов и папок снижает влияние шифрования на производительность, поскольку дополнительные ресурсы затрачиваются только на те файлы, которые необходимо зашифровать в соответствии с политикой безопасности данных организации.

-   **Выборочное шифрование**. Точные средства управления подобного решения позволяют пользователям шифровать только конфиденциальные данные, а администраторам — принудительно шифровать конкретные папки, файлы или типы данных (либо блокировать их шифрование).

-   **Поддержка нескольких пользователей**. Владельцы файлов могут разрешить другим пользователям читать или изменять зашифрованные файлы. Эта возможность позволяет безопасно обмениваться зашифрованными файлами с другими пользователями.

Недостатки шифрования на уровне файлов и папок приведены ниже.

-   **Возможность утечки конфиденциальных данных через файлы, созданные операционной системой или приложениями**. Как правило, операционная система записывает данные приложений, хранящиеся в памяти, в файлы на жестком диске. Эти данные могут содержать конфиденциальные сведения. В операционной системе Windows к таким файлам относятся системный файл подкачки и файл гибернации. Операционная система может также создавать файлы журналов и другие безобидные файлы, которые могут содержать конфиденциальные данные.

-   **Возможность утечки конфиденциальных данных через кэш данных уровня приложений**. Приложения могут использовать собственные средства кэширования или ведения журнала, например временные файлы, через которые может происходить утечка конфиденциальных данных. Хорошим примером являются файлы восстановления, создаваемые Microsoft Word. Эту уязвимости можно в некоторой степени снизить, настроив приложение на создание временных файлов в определенной папке, все файлы в которой шифруются.

-   **Непреднамеренное копирование файлов в незашифрованный файл или папку**. Поскольку шифруются только определенные файлы и папки, пользователь может непреднамеренно скопировать содержимое файла в другой файл, расположенный в незашифрованной папке.

#### Шифрование всего тома

Шифрование всего тома дополняет шифрование на уровне файлов и папок и позволяет устранить общие проблемы, связанные с ним. Если том, который необходимо защитить, содержит файлы операционной системы, необходимо использовать технологию шифрования до загрузки операционной системы. При шифровании всего тома, содержащего файлы операционной системы, необходимо учитывать преимущества и недостатки шифрования до загрузки операционной системы.

Перечисленные ниже преимущества шифрования всего тома позволяют устранить недостатки шифрования на уровне файлов и папок, описанные выше.

-   **Шифрование временных файлов операционной системы**. Поскольку шифруется весь том, выполняется автоматическое шифрование любых файлов, записываемых на этот том, в том числе системного файла подкачки и файла гибернации.

-   **Шифрование временных файлов приложений**. Все временные файлы, создаваемые приложениями, записываются на зашифрованный том и автоматически шифруются.

-   **Автоматическое шифрование всех файлов, создаваемых пользователем**. Если пользователь копирует файл в другую папку тома, он будет автоматически зашифрован. Шифрование всего тома значительно снижает риск ошибки пользователя, которая может привести к обходу шифрования.

Недостатки шифрования всего тома описаны ниже.

-   **Снижение производительности**. При чтении данных необходимо расшифровывать каждый блок на зашифрованном томе, а при записи на диск каждый блок необходимо зашифровывать повторно. Эта функция применяется к исполняемым файлам и файлам конфигурации операционной системы и приложений, а также ко всем файлам данных. Хотя современные технологии шифрования относительно эффективны, при шифровании всего тома следует ожидать снижение производительности от 5 до 15 %.

-   **Ограниченная защита от атак со стороны сотрудников организации**. Шифрование всего тома обеспечивает защиту от ряда автономных атак, но оно обычно обеспечивает очень ограниченную защиту от действий сотрудников организации, которые обычно имеют (или могут получить) возможность войти в систему на целевом компьютере с допустимой учетной записью.

#### Шифрование для каждого пользователя

Шифрование можно реализовать таким способом, что несколько пользователей могут расшифровывать ключи, необходимые для шифрования и расшифровки файлов данных на компьютере, с помощью собственного уникального ключа, который может быть паролем или ключом, хранящимся на USB-устройстве или ином устройстве. При использовании этого подхода совместно с шифрованием на уровне файлов и папок с использованием индивидуальных ключей можно предоставлять пользователям доступ к отдельным файлам.

Ниже перечислены преимущества шифрования для каждого пользователя.

-   **Точный контроль доступа к зашифрованным данным**. Другие пользователи компьютера не смогут прочитать зашифрованные данные, пока владелец файла явным образом не предоставит к нему доступ. Эта функция обеспечивает контроль доступа и конфиденциальность данных.

-   **Возможность выборочного шифрования только конфиденциальных данных**. При надлежащей реализации системы шифрования для каждого пользователя можно защитить только определенные файлы и папки.

-   **Возможность шифрования файлов для нескольких пользователей**. При надлежащей реализации системы шифрования для каждого пользователя владелец файла может зашифровать отдельный файл для нескольких пользователей, обеспечивая общий доступ при сохранении достаточного уровня безопасности. Кроме того, эту функцию можно использовать для восстановления данных, разрешив авторизованному агенту восстановления расшифровывать защищенные файлы.

Недостатки шифрования для каждого тома описаны ниже.

-   **Безопасность всего решения равна безопасности самого слабого ключа (учетных данных)**. При этом подходе каждый ключ шифрования и расшифровки шифруется несколькими ключами (по одному ключу для каждого уникального пользователя). Каждый зашифрованный ключ можно атаковать отдельно, поэтому злоумышленник ищет наименее стойкий ключ, особенно если для создания данных ключа используются пароли для входа в систему, сеть и иные пароли.

#### Шифрование компьютера

Некоторые реализации технологии шифрования не предоставляют возможности использования несколькими лицами отдельного ключа или пароля для расшифровки главных ключей, необходимых для расшифровки данных на компьютере. При подобной реализации существует только один ключ, используемый для доступа к компьютеру и ко всем зашифрованным данным.

Ниже перечислены преимущества шифрования компьютера.

-   **Упрощенная последовательность создания ключей**. Если для начала последовательности создания ключей используется только один ключ, весь механизм существенно упрощается. Меньшая сложность может обеспечить (но не всегда обеспечивает) повышенный уровень безопасности.

Недостатки шифрования компьютера описаны ниже.

-   **Отсутствие защиты от злоумышленников внутри организации**. Любой пользователь, которому политикой разрешено входить в систему на защищенном компьютере, может получить доступ к любому файлу в незашифрованном виде.

[](#mainsection)[К началу страницы](#mainsection)

### Дополнительные сведения

-   [Применение криптографии для обеспечения безопасности сети и данных](http://www.microsoft.com/technet/prodtechnol/windows2000serv/reskit/distrib/dsch_key_rveg.mspx)

-   [Защита компьютера паролем в режиме ожидания или гибернации](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/pwrmn_passwordprotect_standby.mspx?mfr=true)

-   [Как избежать фиктивных продуктов шифрования: вопросы и ответы по средству от всех болезней](http://www.faqs.org/faqs/cryptography-faq/snake-oil/)

-   [Специальная публикация 800-12. Введение в компьютерную безопасность: справочник Национального института стандартов и технологий США](http://csrc.nist.gov/publications/nistpubs/800-12/)

-   [Федеральные стандарты обработки информации (FIPS) 140](http://www.microsoft.com/technet/archive/security/topics/issues/fipseval.mspx)

-   [Сертификация платформы Windows в соответствии со стандартом Common Criteria](http://www.microsoft.com/technet/security/prodtech/windowsxp/ccc/default.mspx)

-   [Жизненный цикл разработки защищенных информационных систем](http://msdn2.microsoft.com/en-us/library/ms995349.aspx)

**Файлы для загрузки**

[Загрузите набор средств шифрования данных для мобильных ПК](http://go.microsoft.com/fwlink/?linkid=81666)

**Регистрация**

[Зарегистрируйтесь в программе тестирования бета-версии набора средств шифрования данных](https://connect.microsoft.com/invitationuse.aspx?programid=790&invitationid=desa-r7gd-3f73&siteid=14)

**Уведомления об обновлениях**

[Подпишитесь, чтобы вовремя узнавать об обновлениях и новых выпусках](http://go.microsoft.com/fwlink/?linkid=54982)

**Отзывы и предложения**

[Присылайте свои комментарии и предложения](mailto:secwish@microsoft.com?subject=data%20encryption%20toolkit%20for%20mobile%20pcs%20security%20analysis%20on%20technet)

[](#mainsection)[К началу страницы](#mainsection)
